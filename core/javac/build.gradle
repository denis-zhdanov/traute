import org.gradle.internal.jvm.Jvm

dependencies {
    compileOnly files(Jvm.current().toolsJar)

    compile project(':core:common')

    testCompile project(':core:test-common').sourceSets.test.output
    testCompile project(path: ':core:test-common', configuration: 'testCompile')
}

jar {
    into('/')
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

archivesBaseName = 'traute-javac'
version = '1.0.0'

uploadArchives {
    repositories {
        mavenDeployer {
            pom.project {
                name 'Traute Javac Plugin'
                description 'A Javac plugin which inserts null-checks into generated bytecode'
                url 'http://traute.oss.harmonysoft.tech/core/javac/'
            }
        }
    }
}